{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,4EAOA,MAAMC,EAAOF,EAAAG,UAEPC,EAAKC,EAAAC,aAAaC,EAAAC,KAIxB,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EARiBC,SAASC,eAAe,iBAWhCC,iBAAiB,UAAUC,MAAOC,IAE3CA,EAAGC,iBAEHZ,EAAWO,SAASC,eAAe,0BAA0BK,MAC7DZ,EAAYM,SAASC,eAAe,sBAAsBK,MAC1DX,EAAWK,SAASC,eAAe,0BAA0BK,MAC7DV,EAAQI,SAASC,eAAe,uBAAuBK,MACvDT,EAAcG,SAASC,eAAe,6BAA6BK,MACnER,EAAWE,SAASC,eAAe,0BAA0BK,MAC7DP,GAAQ,EAERQ,QAAQC,IAAIf,EAAW,KAAOC,EAAY,KAAOC,EAAW,KAAOC,EAAQ,KAAOC,EAAc,KAAOC,GAEvG,MAAMW,EAAU,UAEZhB,YACAC,WACAC,QACAC,cACAC,WACAC,QAXI,QAhCZY,KAgDYA,SAMZP,eAA0BQ,EAAOC,GAE7B,IAGI,aAFsB5B,EAAA6B,+BAA+B3B,EAAMyB,EAAOC,GAOtE,MAAME,GAEFP,QAAQC,IAAIM,GAEM,uBAAfA,EAAMC,MAELC,MAAM,+CAIQ,8BAAfF,EAAMC,MAELC,MAAM,iCA5BSC,CAAWR,EAAQE,MAAOF,EAAQG,gBAmC7DT,eAAiCe,EAAIC,EAAQC,GAEvC,UAEQ/B,EAAAgC,OAAOhC,EAAAiC,IAAIJ,EAAI,QAASC,GAASC,GACvCJ,MAAM,gBAcVO,OAAOC,SAASC,KAAO,eATrB,MAAMX,GAEJP,QAAQC,IAAIM,IA7CVY,CAAkBtC,EAAIsB,EAAKiB,IAAKlB","sources":["src/register.js"],"sourcesContent":["import { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport {firebaseConfig, firebase} from \"./firebase_app\";\r\nimport {app} from \"./firebase_app\";\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\n\r\nconst auth = getAuth();\r\n\r\nconst db = getFirestore(app);\r\n\r\nconst registerForm = document.getElementById(\"form_register\");\r\n\r\nlet username;\r\nlet nameValue;\r\nlet lastName;\r\nlet email;\r\nlet phoneNumber;\r\nlet password;\r\nlet admin;\r\n\r\n\r\nregisterForm.addEventListener(\"submit\", async (ev) => {\r\n\r\n    ev.preventDefault();\r\n\r\n    username = document.getElementById(\"form_register_username\").value;\r\n    nameValue = document.getElementById(\"form_register_name\").value;\r\n    lastName = document.getElementById(\"form_register_lastName\").value;\r\n    email = document.getElementById(\"form_register_email\").value;\r\n    phoneNumber = document.getElementById(\"form_register_phoneNumber\").value;\r\n    password = document.getElementById(\"form_register_password\").value;\r\n    admin = false;\r\n\r\n    console.log(username + \", \" + nameValue + \", \" + lastName + \", \" + email + \", \" + phoneNumber + \", \" + password);\r\n\r\n    const newUser = {\r\n\r\n        username,\r\n        nameValue,\r\n        lastName,\r\n        email, \r\n        phoneNumber,\r\n        password,\r\n        admin\r\n\r\n    }\r\n\r\n    const { user } = await createUser(newUser.email, newUser.password);\r\n\r\n    await addUserToDatabase(db, user.uid, newUser);\r\n\r\n});\r\n\r\nasync function createUser(email, password){\r\n\r\n    try{\r\n        const newUser = await createUserWithEmailAndPassword(auth, email, password);\r\n\r\n        return newUser;\r\n\r\n        console.log(newUser);\r\n    }\r\n    \r\n    catch(error){\r\n\r\n        console.log(error);\r\n\r\n        if(error.code === \"auth/weak-password\"){\r\n\r\n            alert(\"Password must be at least 6 characters long\");\r\n\r\n        }\r\n\r\n        if(error.code === \"auth/email-already-in-use\"){\r\n\r\n            alert(\"That email is already in use\");\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\nasync function addUserToDatabase(db, userId, userInfo){\r\n      \r\n      try{\r\n\r\n        await setDoc(doc(db, \"users\", userId), userInfo);\r\n        alert(\"User created\");\r\n        goToLanding();\r\n\r\n      }\r\n\r\n      catch(error){\r\n\r\n        console.log(error);\r\n\r\n      }\r\n}\r\n\r\nfunction goToLanding(){\r\n\r\n    window.location.href = \"./index.html\";\r\n\r\n}"],"names":["$1tHc5","parcelRequire","$91bb11925ec99353$var$auth","getAuth","$91bb11925ec99353$var$db","$etBjH","getFirestore","$bQjlg","app","$91bb11925ec99353$var$username","$91bb11925ec99353$var$nameValue","$91bb11925ec99353$var$lastName","$91bb11925ec99353$var$email","$91bb11925ec99353$var$phoneNumber","$91bb11925ec99353$var$password","$91bb11925ec99353$var$admin","document","getElementById","addEventListener","async","ev","preventDefault","value","console","log","newUser","user","email","password","createUserWithEmailAndPassword","error","code","alert","$91bb11925ec99353$var$createUser","db","userId","userInfo","setDoc","doc","window","location","href","$91bb11925ec99353$var$addUserToDatabase","uid"],"version":3,"file":"registerPage.7606fc08.js.map"}
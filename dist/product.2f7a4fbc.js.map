{"mappings":"oeACA,IAAAA,EAAAC,EAAA,mCCDAA,EAAA,8FAUA,MAAMC,EAAKC,EAAAC,aAAaC,EAAAC,gDDDxB,MAAMC,EAAKJ,EAAAC,aAAaC,EAAAC,KAClBE,EAAOR,EAAAS,UAEb,IAAIC,EACAC,EAAO,GAEX,MAAMC,EAAqBC,SAASC,eAAe,kBAC7CC,EAAkBF,SAASC,eAAe,gBAahDE,eAAeC,IAEX,MAAMC,EAXV,SAAkBC,GAEd,MAAMC,EAAMC,OAAOC,SAASC,OAG5B,OAFqB,IAAIC,gBAAgBJ,GACVK,IAAIN,GAOjBO,CAAS,OAa/B,SAAuBC,GAEnBf,EAAmBgB,UAAY,2DAMmDD,EAAAE,OAAA,eA+BlF,MAGIC,EAHoBnB,EAAuBoB,MAAAC,GAAiBA,EAAAC,KAAAN,EAAAM,KAG1C,uEAAC,sDAEhBL,UACC,kDAKLD,EAAAO,qFASUC,sQAwBRC,EACGvB,SAAAwB,cAAO,mBAKXC,iBAAA,SAAcC,IAEb5B,EAAA6B,KAAAb,GACPjB,GAAA+B,EAAAC,mBAAAnC,EAAAG,EAAAiC,IAAAhC,mXAhGEiC,CALgB,UCvBpB5B,eAA0BiB,GAEtB,MAAMY,EAAS1C,EAAA2C,IAAI5C,EAAI,QAAS+B,GAIhC,aAHsB9B,EAAA4C,OAAOF,EAAQ,UAChBG,ODgBFC,CAAW/B,GAK1Be,GAAIf,IAnBOL,SAASC,eAAe","sources":["src/product.js","src/utils/getProduct.js"],"sourcesContent":["\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nimport {app} from \"./firebase_app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport {getProduct} from \"./utils/getProduct\";\r\nimport { getCart } from \"./itemShowcase\";\r\nimport {createFirebaseCart, getFirebaseCart} from \"./utils/cartFunction\";\r\nimport { validate } from \"./specs/addProductsValidation\";\r\n\r\nconst db = getFirestore(app);\r\nconst auth = getAuth();\r\n\r\nlet userHasLoggedIn = undefined;\r\nlet cart = [];\r\n\r\nconst productAssestsArea = document.getElementById(\"product_assets\");\r\nconst productInfoArea = document.getElementById(\"product_info\");\r\n\r\nconst addItemBtn = document.getElementById(\"navbar__addItem__a\");\r\n\r\nfunction getParam(param){\r\n\r\n    const url = window.location.search;\r\n    const searchParams = new URLSearchParams(url);\r\n    const productId = searchParams.get(param);\r\n    return productId;\r\n\r\n}\r\n\r\nasync function loadProduct(){\r\n\r\n    const productId = getParam(\"id\");\r\n    const data = await getProduct(productId);\r\n\r\n\r\n    const product = {\r\n        ...data,\r\n        id: productId\r\n    }\r\n\r\n    renderProduct(product);\r\n\r\n}\r\n\r\nfunction renderProduct(product){\r\n\r\n    productAssestsArea.innerHTML = `\r\n    \r\n    <img class=\"product_image\" id=\"pImage\" src=\"${product.images[0]}\">\r\n\r\n    `;\r\n\r\n    const isProductInCart = cart.some((productCart) => productCart.id === product.id);\r\n\r\n    const productButtonCart = isProductInCart ?\r\n    \r\n    `<button class=\"product_cart\" disabled>Product added to cart</button>` :\r\n    `<button class=\"product_cart\">Add to cart</button>`\r\n    ;\r\n\r\n    productInfoArea.innerHTML = `\r\n\r\n        <h1 class=\"product_name\">\r\n        ${product.nameValue}\r\n        </h1>\r\n        \r\n        <h3 class=\"product_price\">\r\n        ${product.price}.00$\r\n\r\n        \r\n        </h3>\r\n        <p class=\"product_desc\">\r\n        lorem ipsum\r\n        </p>\r\n\r\n        <div class= \"buttons\">\r\n        <button class=\"showcase__button\">Go to showcase</button>\r\n        ${productButtonCart}\r\n        </div>\r\n        \r\n\r\n    `;\r\n\r\n    const addToCartButton = document.querySelector(\".product_cart\");\r\n    addToCartButton.addEventListener(\"click\", (ev) =>{\r\n\r\n        cart.push(product);\r\n\r\n        if(userHasLoggedIn){\r\n            createFirebaseCart(db, userHasLoggedIn.uid, cart);\r\n        }\r\n\r\n        addToCartButton.setAttribute(\"disabled\", true);\r\n        addToCartButton.innerText = \"Product added to cart\";\r\n    });\r\n\r\n    const goShowcase = document.querySelector(\".showcase__button\");\r\n    goShowcase.addEventListener(\"click\", (ev) =>{\r\n\r\n        \r\n\r\n        if(product.instrument == \"Guitar\"){\r\n            window.location.href= \"https://ahtepsilon.github.io/virtual_guitar_game/game/index.html\";\r\n        }else if(product.instrument == \"Bass\"){\r\n            window.location.href= \"https://ahtepsilon.github.io/virtual_guitar_game/game/bass.html\";\r\n        }\r\n\r\n        \r\n    });\r\n\r\n}\r\n\r\naddItemBtn.addEventListener(\"click\", (ev) =>{\r\n\r\n    validate(db, auth);\r\n\r\n});\r\n\r\nonAuthStateChanged(auth, async (user) => {\r\n    onAuthStateChanged(auth, async (user) => {\r\n        if (user) {\r\n          // User is signed in, see docs for a list of available properties\r\n          // https://firebase.google.com/docs/reference/js/firebase.User\r\n          userHasLoggedIn = user;\r\n          cart = await getFirebaseCart(db, userHasLoggedIn.uid);\r\n          console.log(cart);\r\n          // ...\r\n        } else {\r\n            cart = getCart();\r\n          // User is signed out\r\n          // ...\r\n        }\r\n    \r\n        loadProduct();\r\n    \r\n      });\r\n})","import { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport {firebaseConfig, firebase} from \"../firebase_app\";\r\nimport {app} from \"../firebase_app\";\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\n\r\nimport { collection, getDoc } from \"firebase/firestore\";\r\n\r\nimport { fetchItems } from \"../utils/item\";\r\nconst db = getFirestore(app);\r\n\r\nasync function getProduct(id){\r\n\r\n    const docRef = doc(db, \"items\", id);\r\n    const docSnap = await getDoc(docRef, \"items\");\r\n    const data = docSnap.data();\r\n\r\n    return data;\r\n}\r\n\r\nexport{\r\n    getProduct\r\n}"],"names":["$1tHc5","parcelRequire","$9746abb0c365f756$var$db","$etBjH","getFirestore","$bQjlg","app","$4561a5f183cf30d8$var$db","$4561a5f183cf30d8$var$auth","getAuth","$4561a5f183cf30d8$var$userHasLoggedIn","$4561a5f183cf30d8$var$cart","$4561a5f183cf30d8$var$productAssestsArea","document","getElementById","$4561a5f183cf30d8$var$productInfoArea","async","$4561a5f183cf30d8$var$loadProduct","productId","param","url","window","location","search","URLSearchParams","get","$4561a5f183cf30d8$var$getParam","product","innerHTML","images","productButtonCart","some","productCart","id","nameValue","price","addToCartButton","querySelector","addEventListener","ev","push","$bdlMF","createFirebaseCart","uid","$4561a5f183cf30d8$var$renderProduct","docRef","doc","getDoc","data","$9746abb0c365f756$export$e2005c9600188ac7"],"version":3,"file":"product.2f7a4fbc.js.map"}